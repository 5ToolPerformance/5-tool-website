---
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";
import { loadQuery } from "../../lib/load-query";
import type { ServicesType } from "../../lib/types";
import { urlForImage } from "../../lib/urlForImage";
import { getCompanyInformation } from "../../lib/companyInformation";

const { data: companyInfo } = await getCompanyInformation();

const { data: services } = await loadQuery<ServicesType[]>({
  query: `*[_type == "services"] | order(orderRank)`,
});
---

<Layout seo={companyInfo?.seo} siteUrl="https://www.5tool.com">
  <div class="max-w-full px-0 pt-16">
    <div class="text-center mb-16 px-4 sm:px-6 lg:px-8 bg-white">
      <h1 class="text-4xl font-bold text-navy-900 sm:text-5xl md:text-6xl mb-4">
        Our Services
      </h1>
      <p class="max-w-2xl mx-auto text-lg text-navy-700">
        Comprehensive baseball training programs designed to develop complete
        players
      </p>
    </div>

    <div class="space-y-0">
      {
        services?.map((service, index) => {
          const isEven = index % 2 === 0;
          return (
            <section
              class={`w-full flex flex-col ${isEven ? "md:flex-row bg-navy text-white" : "md:flex-row-reverse bg-carolina text-navy"}`}
            >
              <div class="w-full md:w-1/2">
                {service.image && (
                  <Image
                    src={urlForImage(service.image).url()}
                    alt={service.image.alt || service.title}
                    class="w-full h-full object-cover"
                    loading="lazy"
                    inferSize
                  />
                )}
              </div>
              <div class="w-full md:w-1/2 p-8 md:p-16 flex flex-col">
                <h2
                  class={`text-3xl font-bold mb-4 ${isEven ? "text-white" : "text-navy"}`}
                >
                  <a
                    href={`/services/${service.slug.current}`}
                    class={`${isEven ? "hover:text-carolina" : "hover:text-navy/70"} transition-colors`}
                  >
                    {service.title}
                  </a>
                </h2>
                <p
                  class={`${isEven ? "text-white/90" : "text-navy-700"} mb-6 text-lg`}
                >
                  {service.shortDescription}
                </p>
                {service.pricingInfo && service.pricingInfo.length > 0 && (
                  <div class="mt-auto pt-4">
                    <div
                      class={`flex flex-col divide-y ${isEven ? "divide-white/20" : "divide-navy/20"}`}
                    >
                      {service.pricingInfo.map((item) => (
                        <div class="grid grid-cols-12 items-center py-3">
                          <p
                            class={`col-span-6 font-medium ${isEven ? "text-white" : "text-navy"}`}
                          >
                            {item.title}
                          </p>
                          <p
                            class={`col-span-3 text-center text-base font-semibold tabular-nums ${isEven ? "text-carolina" : "text-navy"}`}
                          >
                            {item.price}
                          </p>
                          <a
                            href={item.link}
                            class={`col-span-3 justify-self-end inline-flex items-center justify-center px-3 py-1.5 rounded-none transition-colors duration-200 text-sm font-medium ${isEven ? "bg-carolina text-navy hover:bg-carolina-700" : "bg-navy text-white hover:bg-navy/90"}`}
                          >
                            Book Now
                          </a>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            </section>
          );
        })
      }
    </div>
    <section class="py-12 bg-navy text-white text-center">
      <h2 class="text-3xl font-bold mb-4">Ready to Get Started?</h2>
      <p class="text-lg mb-8 max-w-3xl mx-auto">
        Contact us today to schedule a session or learn more about our training
        programs.
      </p>
      <a
        href="/contact"
        class="inline-flex items-center px-6 py-3 text-base font-medium text-navy bg-carolina hover:bg-carolina-700 transition-colors rounded-none"
      >
        Contact Us
      </a>
    </section>
  </div>
</Layout>
